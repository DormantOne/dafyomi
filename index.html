<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Daf Yomi</title>
</head>
<body>
    <h3 id="currentDate"></h3>
    <h3 id="currentDaf"></h3>
    <div id="hebrewText"></div>
    <button id="fetchDaf">Fetch Daf</button>

    <script>
        document.getElementById("fetchDaf").addEventListener("click", async () => {
            const currentDateDiv = document.getElementById("currentDate");
            const currentDafDiv = document.getElementById("currentDaf");
            const hebrewTextDiv = document.getElementById("hebrewText");

            // Test with a date known to be in the JSON
            const date = new Date("2025-01-01"); // Change to new Date() for today's date
            const month = date.getMonth() + 1; // e.g., 1 for January
            const day = date.getDate(); // e.g., 1 for the 1st
            const year = date.getFullYear(); // e.g., 2025
            const today = `${month}/${day}/${year}`; // e.g., "1/1/2025"

            currentDateDiv.textContent = `Today's Date: ${today}`;

            try {
                const response = await fetch("Daf_Yomi_Cycle.json");
                if (!response.ok) {
                    console.error("Failed to load JSON:", response.status);
                    throw new Error("Failed to load JSON");
                }
                const dafYomiData = await response.json();
                console.log("JSON loaded:", dafYomiData);
                console.log("Looking for date:", today);

                const currentDaf = dafYomiData[today];
                if (!currentDaf) {
                    currentDafDiv.textContent = "No Daf Yomi assigned for today.";
                    hebrewTextDiv.textContent = "No content available.";
                    return;
                }

                currentDafDiv.textContent = `Daf Yomi: ${currentDaf}`;
            } catch (error) {
                console.error("Error:", error);
                hebrewTextDiv.textContent = "Error fetching Daf.";
            }
        });
    </script>
</body>
</html>
